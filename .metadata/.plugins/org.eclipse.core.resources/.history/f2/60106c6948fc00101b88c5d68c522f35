package com.revhire.ui;

import java.util.List;
import java.util.Scanner;

import com.revhire.model.Application;
import com.revhire.service.ApplicationService;
import com.revhire.service.ApplicationServiceImpl;

public class ApplicationMenu {

	private static ApplicationService appService = new ApplicationServiceImpl();

	public static void showJobSeekerMenu(int jobSeekerId) {

		Scanner sc = new Scanner(System.in);

		while (true) {
			System.out.println("\n=== Application Menu ===");
			System.out.println("1. Apply for Job");
			System.out.println("2. View My Applications");
			System.out.println("3. Back");

			int choice = sc.nextInt();

			switch (choice) {

			case 1:
				Application app = new Application();

				System.out.print("Enter Job ID: ");
				app.setJobId(sc.nextInt());

				app.setJobSeekerId(jobSeekerId);

				if (appService.applyForJob(app)) {
					System.out.println("✅ Job applied successfully");
				} else {
					System.out.println("❌ Application failed");
				}
				break;

			case 2:
				List<Application> apps = appService.viewMyApplications(jobSeekerId);

				System.out.println("\n--- My Applications ---");
				for (Application a : apps) {
					System.out.println(
							a.getApplicationId() + " | Job ID: " + a.getJobId() + " | Status: " + a.getStatus());
				}
				break;

			case 3:
				return;
			}
		}
	}
}
